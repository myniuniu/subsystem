<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>凸透镜成像交互演示</title>
    <link rel="stylesheet" href="lens_demo.css">
</head>
<body>
    <div class="container">
        <header class="demo-header">
            <h1>🔍 凸透镜成像交互演示</h1>
            <p>拖拽物体或调节滑块，实时观察物体距离变化对成像的影响</p>
        </header>

        <div class="experiment-area">
            <div class="controls-panel">
                <div class="control-group">
                    <h3>📏 参数调节</h3>
                    
                    <div class="parameter-control">
                        <label>焦距 (f)</label>
                        <div class="input-group">
                            <input type="range" id="focalLength" min="5" max="20" value="10" step="0.5">
                            <span id="focalValue">10 cm</span>
                        </div>
                    </div>

                    <div class="parameter-control">
                        <label>物距 (u)</label>
                        <div class="input-group">
                            <input type="range" id="objectDistance" min="2" max="80" value="15" step="0.5">
                            <span id="objectValue">15 cm</span>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <h3>🎯 快速定位</h3>
                    <div class="quick-buttons">
                        <button class="quick-btn" data-type="far">远距离 (u > 2f)</button>
                        <button class="quick-btn" data-type="middle">中距离 (f < u < 2f)</button>
                        <button class="quick-btn" data-type="near">近距离 (u < f)</button>
                        <button class="quick-btn" data-type="focus">焦点位置 (u = f)</button>
                    </div>
                </div>

                <div class="control-group">
                    <h3>🎨 显示选项</h3>
                    <div class="display-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="showRays" checked>
                            <span>显示光线</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="showGrid" checked>
                            <span>显示网格</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="showLabels" checked>
                            <span>显示标签</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="showAnimation" checked>
                            <span>动画效果</span>
                        </label>
                    </div>
                </div>

                <div class="info-panel">
                    <h3>📊 成像信息</h3>
                    <div class="image-properties">
                        <div class="property">
                            <span class="label">像距 (v):</span>
                            <span id="imageDistance">-</span>
                        </div>
                        <div class="property">
                            <span class="label">放大倍数:</span>
                            <span id="magnification">-</span>
                        </div>
                        <div class="property">
                            <span class="label">像的性质:</span>
                            <span id="imageNature">-</span>
                        </div>
                        <div class="property">
                            <span class="label">像的位置:</span>
                            <span id="imagePosition">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="diagram-area">
                <div class="diagram-container">
                    <svg id="lensCanvas" width="800" height="500" viewBox="0 0 800 500">
                        <!-- 背景网格 -->
                        <defs>
                            <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                                <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e0e0e0" stroke-width="1"/>
                            </pattern>
                        </defs>
                        <rect width="100%" height="100%" fill="url(#grid)" id="gridPattern"/>
                        
                        <!-- 主光轴 -->
                        <line x1="50" y1="250" x2="750" y2="250" stroke="#333" stroke-width="2" stroke-dasharray="5,5"/>
                        
                        <!-- 透镜 -->
                        <g id="lensGroup">
                            <ellipse cx="400" cy="250" rx="8" ry="100" fill="lightblue" stroke="#0066cc" stroke-width="3" opacity="0.7"/>
                            <text x="400" y="380" text-anchor="middle" font-size="16" fill="#0066cc" font-weight="bold">凸透镜</text>
                        </g>
                        
                        <!-- 焦点 -->
                        <g id="focusPoints">
                            <circle id="leftFocus" cx="300" cy="250" r="4" fill="#ff6600"/>
                            <text id="leftFocusLabel" x="300" y="275" text-anchor="middle" font-size="14" fill="#ff6600">F</text>
                            <circle id="rightFocus" cx="500" cy="250" r="4" fill="#ff6600"/>
                            <text id="rightFocusLabel" x="500" y="275" text-anchor="middle" font-size="14" fill="#ff6600">F'</text>
                        </g>
                        
                        <!-- 物体 -->
                        <g id="objectGroup">
                            <line id="objectLine" x1="200" y1="250" x2="200" y2="180" stroke="#e91e63" stroke-width="4"/>
                            <polygon id="objectArrow" points="200,180 190,195 210,195" fill="#e91e63"/>
                            <circle id="objectHandle" cx="200" cy="180" r="12" fill="rgba(233, 30, 99, 0.3)" stroke="#e91e63" stroke-width="2" style="cursor: grab;"/>
                            <text id="objectLabel" x="200" y="160" text-anchor="middle" font-size="14" fill="#e91e63" font-weight="bold">物体</text>
                        </g>
                        
                        <!-- 像 -->
                        <g id="imageGroup">
                            <line id="imageLine" x1="600" y1="250" x2="600" y2="320" stroke="#4caf50" stroke-width="4"/>
                            <polygon id="imageArrow" points="600,320 590,305 610,305" fill="#4caf50"/>
                            <text id="imageLabel" x="600" y="345" text-anchor="middle" font-size="14" fill="#4caf50" font-weight="bold">像</text>
                        </g>
                        
                        <!-- 光线 -->
                        <g id="rayGroup">
                            <!-- 平行于主轴的光线 -->
                            <path id="ray1" stroke="#ff5722" stroke-width="2" fill="none"/>
                            <!-- 过光心的光线 -->
                            <path id="ray2" stroke="#ff5722" stroke-width="2" fill="none"/>
                            <!-- 过焦点的光线 -->
                            <path id="ray3" stroke="#ff5722" stroke-width="2" fill="none"/>
                        </g>
                        
                        <!-- 距离标注 -->
                        <g id="distanceLabels">
                            <!-- 物距标注 -->
                            <line id="uLine" x1="200" y1="400" x2="400" y2="400" stroke="#e91e63" stroke-width="2"/>
                            <text id="uLabel" x="300" y="420" text-anchor="middle" font-size="16" fill="#e91e63">u</text>
                            
                            <!-- 像距标注 -->
                            <line id="vLine" x1="400" y1="430" x2="600" y2="430" stroke="#4caf50" stroke-width="2"/>
                            <text id="vLabel" x="500" y="450" text-anchor="middle" font-size="16" fill="#4caf50">v</text>
                            
                            <!-- 焦距标注 -->
                            <line id="fLine" x1="300" y1="460" x2="400" y2="460" stroke="#ff6600" stroke-width="2"/>
                            <text id="fLabel" x="350" y="480" text-anchor="middle" font-size="16" fill="#ff6600">f</text>
                        </g>
                    </svg>
                    
                    <div class="tips">
                        <p>💡 提示：拖拽物体上的圆圈可以直接调节物距</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="formula-section">
            <h3>📐 透镜公式</h3>
            <div class="formula-display">
                <div class="formula">1/f = 1/u + 1/v</div>
                <div class="calculation" id="formulaCalculation">计算结果将在这里显示</div>
            </div>
        </div>
    </div>

    <script src="lens_demo.js"></script>
</body>
</html>